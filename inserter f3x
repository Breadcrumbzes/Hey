local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local tool

for _, v in pairs(player:GetDescendants()) do
	if v.Name == "SyncAPI" and v:FindFirstChild("ServerEndpoint") then
		tool = v.Parent
		break
	end
end

if not tool then
	for _, v in pairs(ReplicatedStorage:GetDescendants()) do
		if v.Name == "SyncAPI" and v:FindFirstChild("ServerEndpoint") then
			tool = v.Parent
			break
		end
	end
end

local remote = tool:WaitForChild("SyncAPI"):WaitForChild("ServerEndpoint")

local function CreatePart(cf, parent)
	return remote:InvokeServer("CreatePart", "Normal", cf, parent)
end

local function Resize(part, size, cf)
	remote:InvokeServer("SyncResize", {{Part = part, CFrame = cf, Size = size}})
end

local function SetCollision(part, boolean)
	remote:InvokeServer("SyncCollision", {{Part = part, CanCollide = boolean}})
end

local function SetAnchor(boolean, part)
	remote:InvokeServer("SyncAnchor", {{Part = part, Anchored = boolean}})
end

local function Color(part, color)
	remote:InvokeServer("SyncColor", {{Part = part, Color = color, UnionColoring = false}})
end

local function SetTrans(part, trans)
	remote:InvokeServer("SyncMaterial", {{Part = part, Transparency = trans}})
end

local function SpawnDecal(part, face)
	remote:InvokeServer("CreateTextures", {{Part = part, Face = face, TextureType = "Decal"}})
end

local function AddDecal(part, asset, face)
	remote:InvokeServer("SyncTexture", {{Part = part, Face = face, TextureType = "Decal", Texture = "rbxassetid://"..asset}})
end

local function SetName(part, name)
	remote:InvokeServer("SetName", {part}, name)
end

local function AddMesh(part)
	remote:InvokeServer("CreateMeshes", {{Part = part}})
end

local function SetMesh(part, meshId)
	remote:InvokeServer("SyncMesh", {{Part = part, MeshId = meshId}})
end

local function MeshResize(part, scale)
	remote:InvokeServer("SyncMesh", {{Part = part, Scale = scale}})
end

local function DestroyPart(part)
	remote:InvokeServer("Remove", {part})
end

local obj = game:GetObjects("rbxassetid://8192195260")[1]
obj.Parent = workspace
obj:PivotTo(CFrame.new(0,100,0))

wait(0.1)

for _, basepart in pairs(obj:GetDescendants()) do
	if basepart:IsA("BasePart") then
		task.spawn(function()
			local newPart = remote:InvokeServer("CreatePart", "Normal", basepart.CFrame, workspace)

			for _, decal in pairs(basepart:GetChildren()) do
				if decal:IsA("Decal") then
					remote:InvokeServer("CreateTextures", {{Part = newPart, Face = decal.Face, TextureType = "Decal"}})
					remote:InvokeServer("SyncTexture", {{Part = newPart, Face = decal.Face, TextureType = "Decal", Texture = "rbxassetid://"..decal.Texture}})
				end
			end

			remote:InvokeServer("SyncCollision", {{Part = newPart, CanCollide = basepart.CanCollide}})
			remote:InvokeServer("SyncAnchor", {{Part = newPart, Anchored = basepart.Anchored}})
			remote:InvokeServer("SyncColor", {{Part = newPart, Color = basepart.Color, UnionColoring = false}})
			remote:InvokeServer("SyncMaterial", {{Part = newPart, Transparency = basepart.Transparency}})
			remote:InvokeServer("SyncResize", {{Part = newPart, CFrame = basepart.CFrame, Size = basepart.Size}})
			remote:InvokeServer("SetName", {newPart}, basepart.Name)

			for _, mesh in pairs(basepart:GetChildren()) do
				if mesh:IsA("SpecialMesh") then
					remote:InvokeServer("CreateMeshes", {{Part = newPart}})
					remote:InvokeServer("SyncMesh", {{Part = newPart, MeshId = mesh.MeshId}})
					remote:InvokeServer("SyncMesh", {{Part = newPart, Scale = mesh.Scale}})
				end
			end
		end)
	end
end

obj:Destroy()
