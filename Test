local Players = game:GetService("Players")
local player = Players.LocalPlayer
player.Character.Humanoid.Health = 0
local function convertMotor6DToRagdoll(motor)
	local part0 = motor.Part0
	local part1 = motor.Part1
	if not (part0 and part1) then return end

	-- Create attachments that match the motor's C0 and C1 offsets
	local attachment0 = Instance.new("Attachment")
	attachment0.Name = "RagdollAttachment0"
	attachment0.CFrame = motor.C0
	attachment0.Parent = part0

	local attachment1 = Instance.new("Attachment")
	attachment1.Name = "RagdollAttachment1"
	attachment1.CFrame = motor.C1
	attachment1.Parent = part1

	-- Create a BallSocketConstraint to replace the Motor6D
	local socket = Instance.new("BallSocketConstraint")
	socket.Name = "RagdollSocket"
	socket.Attachment0 = attachment0
	socket.Attachment1 = attachment1
	socket.Parent = part0

	motor.Enabled = false
end

local function ragdollCharacter(character)
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	if humanoid then
		humanoid:ChangeState(Enum.HumanoidStateType.Physics)
	end

	-- Replace all Motor6Ds with physics joints
	for _, desc in ipairs(character:GetDescendants()) do
		if desc:IsA("Motor6D") then
			convertMotor6DToRagdoll(desc)
		end
	end

	-- Launch the player into the air
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then
		root.Velocity = Vector3.new(0, 200, 0) -- strong upward launch
	end

	-- Play sound in head
	local head = character:FindFirstChild("Head")
	if head then
		local sound = Instance.new("Sound")
		sound.SoundId = "rbxassetid://15599005570"
		sound.Volume = 10
		sound.PlayOnRemove = true
		sound.Parent = head
		sound:Destroy()
	end
end

-- Trigger
local function run()
	local character = player.Character or player.CharacterAdded:Wait()
	ragdollCharacter(character)
end

run()
